<!--
 * @Author: vuvivian
 * @Description: è¯·è¾“å…¥....
 * @Date: 2024-05-22 22:21:46
 * @LastEditors: Do not edit
 * @LastEditTime: 2025-04-17 01:07:00
 * @FilePath: /056-4-SGRR-Clock/index.html
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¶å…‰èè‹’-å››å›½æ—¶é’Ÿ-WIFIæ—¶é’Ÿè®¾ç½®</title>
    <style>
        html, 
        body,
        div,
        span,
        applet,
        object,
        iframe,
        h1,
        h3,
        h4,
        h5,
        h6,
        p,
        blockquote,
        pre,
        a,
        abbr,
        acronym,
        address,
        big,
        cite,
        code,
        del,
        dfn,
        em,
        img,
        ins,
        kbd,
        q,
        s,
        samp,
        small,
        strike,
        strong,
        sub,
        sup,
        tt,
        var,
        b,
        u,
        i,
        center,
        dl,
        dt,
        dd,
        ol,
        ul,
        li,
        fieldset,
        form,
        label,
        legend,
        table,
        caption,
        tbody,
        tfoot,
        thead,
        tr,
        th,
        td,
        article,
        aside,
        canvas,
        details,
        embed,
        figure,
        figcaption,
        footer,
        header,
        hgroup,
        menu,
        nav,
        output,
        ruby,
        section,
        summary,
        time,
        mark,
        audio,
        video {
            margin: 0;
            padding: 0;
            border: 0;
            font-size: 100%;
            font: inherit;
            vertical-align: baseline;
            /* font-family: 'PT Serif', serif; */
        }

        .container {
            background-color: #f4f6fb;
            height: calc(100vh);
            overflow: auto;

        }

        .header {
            /* #7887ff */
            background-color: #5d7cfa;
            height: 15rem;
            border-radius: 0% 0% 8% 8%;
            padding: 1rem 0.4rem 2rem 0.4rem;
        }

        .title {
            color: #fbfcff;
            text-align: center;
        }

        h2 {
            margin: 0 0 0.5rem 0;
        }

        .nav {
            display: flex;
            justify-content: center;
            padding: 1rem 0;
        }

        .tab {
            background-color: #7893ff;
            color: #FFFFFF;
            height: 3rem;
            width: 5rem;
            line-height: 3rem;
            padding: 0% 1rem;
            border-radius: 2rem;
            text-align: center;
            margin-right: 1rem;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .tab-active {
            background-color: #f3f3f3;
            color: #3f64fb;
            font-weight: bolder;
        }

        .content {
            width: 92%;
            margin-left: 4%;
            margin-top: -7rem;
            border-radius: 1rem;
            background-color: #FFFFFF;
            box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
        }

        .content-show {
            display: block !important;
        }

        .content-hide {
            display: none !important;
        }

        .content-block {
            display: none;
            text-align: center;
            padding: 1rem;
            width: auto;
        }

        .sub-title-content {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background: #68696d;
            border-radius: 1rem 1rem 0 0rem;
            margin-left: -1rem;
            margin-right: -1rem;
            margin-top: -1rem;
            margin-bottom: 1rem;
        }

        .sub-title-active {
            background-color: #fa9a5d;
            color: #fff !important;
            font-weight: bold;
            border-radius: 1rem 1rem 0 0rem !important; 
        }

        .sub-title {
            flex: 1;
            padding: 0.4rem 0.2rem;
            color: #fff;
            border-radius: 0.22rem;
        }

        .sub-title2 {
            flex: none;
            font-weight: 400;
            border-radius: 0 1rem 0 0 !important;
        }

        .sub-content {
            display: none;
            opacity: 0;
            height: 0; 
            transition: visibility 0.3s, opacity 0.3s, height 0.3s;
        }

        .sub-content-show {
            display: block !important;
            opacity: 1 !important;
            height: auto !important;
        }

        .dst-container {
            background-color: #eaebf1; 
            margin-bottom: 1rem; 
            padding: 0.5rem 1rem; 
            border-radius: 0.4rem;
           position: relative;
        }
        .dst-title {
            font-size: 1rem;
            text-align: center;
            width: 100%;
            color: #fff;
            position: absolute;
            top: -0.7rem;
            left: 0;
            z-index: 1;
        }

        .dst-title-text {
            display: inline-block;
            padding: 0.2rem 1rem;
            background: linear-gradient(135deg, #5d7cfa, #fa9a5d);
            border-radius: 0.5rem;
            font-weight: bold;
            box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);
            text-transform: uppercase;
            letter-spacing: 0.05rem;
        }
       
        #DST_1, #ZONE_1 {
            background-color: #FFDDDD;
        }
        #DST_2, #ZONE_2 {
            background-color: #aedefc;
        }
        #DST_3, #ZONE_3 {
            background-color: #eaebf1;
        }
        #DST_4, #ZONE_4 {
            background-color: #dff4f3;
        }

        .form {
            width: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
        }

        .form-item {
            padding: 0.6rem 0.8rem;
            border-radius: 1rem;
            text-align: left;
        }

        .form-item-label {
            display: inline-block;
            color: #68696d;
            font-size: 0.8rem;
            font-weight: 700;
            transition: all 0.2s;
            margin-bottom: 0.6rem;
        }

        .form-item-input,
        .form-item-select {
            position: relative;
            display: inline-block;
            width: 100%;
            min-width: 50;
            border-radius: 6px;
            background: #FFFFFF;
            padding: 0.2rem;
            color: #2f3140;
            font-size: 0.8rem;
            font-weight: 700;
            line-height: 2.2rem;
            box-sizing: border-box;
            border: 1px solid #7893ff;
            list-style: none;
            transition: all 0.2s;
        }

        .form-item-range {
            width: 100%;
            background: #c7d0f4;
            overflow: hidden;
            /* outline: none; */
            /* -webkit-appearance: none; æ¸…é™¤ç³»ç»Ÿé»˜è®¤æ ·å¼ */
            /* height: 3px; æ¨ªæ¡çš„é«˜åº¦ */
        }

        .form-item-group {
            margin: 0em 0  0.2rem 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .form-item-select {
            height: 2.7rem;
            line-height: 2.7rem;
        }

        .form-item-radio {
            margin: 0 1rem 0 0rem;
            color: #2f3140;
            font-weight: 700;
            font-size: 0.8rem;
        }

        .refresh-btn {
            width: 3rem;
            height: 2.5rem;
            font-size: small;
            line-height: 2.5rem;
            color: #000;
            text-align: center;
            margin-left: 0.4rem;
            /* border: #5d7cfa 1px solid; */
            background-color: #f3f6fc;
            border-radius: 22%;
        }

        .toogle-ssid-btn {
            width: 5rem;
            height: 2.5rem;
            font-size: 0.8rem;
            line-height: 2.5rem;
            color: #fff;
            text-align: center;
            margin-left: 0.4rem;
            background-color: #7893ff;
            border-radius: 10%;
        }

        .form-button {
            padding: 1rem 0;
            display: flex;
            justify-content: space-around;
            align-items: center;

        }

        .reset-button {
            width: 46%;
            height: 3.4rem;
            border: none;
            background-color: #fff;
            font-size: 1.2rem;
            color: #2f3140;
            border: 1px solid #c7d0f4;
            border-radius: 1rem;
            letter-spacing: 0.6rem;
        }

        .save-button {
            width: 46%;
            height: 3.4rem;
            border: none;
            background-color: #5d7cfa;
            font-size: 1.2rem;
            color: #FFFFFF;
            border-radius: 1rem;
            letter-spacing: 0.6rem;
        }

        .autoLocalTime {
            padding: 0rem 0.8rem;
            color: #2f3140;
        }

        input:disabled {
            cursor: default;
            background-color: light-dark(rgba(239, 239, 239, 0.3), rgba(59, 59, 59, 0.3));
            color: light-dark(rgb(84, 84, 84), rgb(170, 170, 170));
            border-color: rgba(118, 118, 118, 0.3);
        }

        input[type="checkbox"].form-item-checkbox-normal {
            margin: 0em 0.2rem 0 0;
            padding: 0;
            width: 1.2em;
            height: 1.2em;
            border: 1px solid #ccc;
            font-size: 0.9em;
            display: inline-block;
            vertical-align: middle;
        }

        input[type="radio"],
        input[type="checkbox"].form-item-checkbox {
            -webkit-appearance: none;
            -moz-appearance: none;
            position: relative;
            display: inline-block;
            vertical-align: middle;
            margin: 0em 0.2rem 0 0;
            padding: 0;
            width: 1.6em;
            height: 1.6em;
            border: 1px solid #ccc;
            font-size: 0.9em;
            cursor: pointer;
            outline: none;
            transition: all .2s ease;
        }

        input[type="radio"] {
            border-radius: 50%;
        }

        input[type="radio"]:after {
            content: '';
            display: inline-block;
            position: absolute;
            left: 50%;
            top: 50%;
            background: #7893ff;
            border-radius: 50%;
            width: 0;
            height: 0;
            opacity: 0;
            transform: translate(-50%, -50%);
            transition: all .2s ease;
            transform-origin: center center;
            pointer-events: none;
        }

        input[type="radio"]:checked:after {
            width: 1em;
            height: 1em;
            opacity: 1;
        }

        input[type="checkbox"] {
            border-radius: .2em;
        }

        input[type="checkbox"].form-item-checkbox:after {
            content: '\2714';
            display: inline-block;
            position: absolute;
            left: 50%;
            top: 50%;
            color: #7893ff;
            font-size: 2.5em;
            font-family: meiryo, "sans-serif";
            opacity: 0;
            transition: all .1s ease;
            transform: translate(-50%, -50%) scale3d(.2, .2, 1);
            transform-origin: center center;
        }

        input[type="checkbox"].form-item-checkbox:checked:after {
            opacity: 1;
            transform: translate(-50%, -50%) scale3d(1.2, 1.2, 1);
        }

        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 2rem;
            border-radius: 0.5rem;
            border: 0;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 2rem;
            height: 2rem;
            border-radius: 59%;
            border: 0px solid transparent;
            border-image: linear-gradient(#7893ff, #7893ff) 0 fill / 8 20 8 0 / 0 0 0 99vw;
        }

        input[type="datetime-local"] {
            width: 100%;
            color: #2f3140;
            font-size: 0.8rem;
        }

        .form-item-block {
            background-color: #f4f6fb;
            margin: 0.5rem 0;
            padding: 0.6rem 0.8rem;
            border-radius: 0.4rem;
            text-align: left;
            box-shadow: rgba(0, 0, 0, 0.05) 0px 0px 0px 1px;
            /* box-shadow: rgba(17, 17, 26, 0.1) 0px 8px 24px, rgba(17, 17, 26, 0.1) 0px 16px 56px, rgba(17, 17, 26, 0.1) 0px 24px 80px; */
            /* box-shadow: rgba(0, 0, 0, 0.17) 0px -23px 25px 0px inset, rgba(0, 0, 0, 0.15) 0px -36px 30px 0px inset, rgba(0, 0, 0, 0.1) 0px -79px 40px 0px inset, rgba(0, 0, 0, 0.06) 0px 2px 1px, rgba(0, 0, 0, 0.09) 0px 4px 2px, rgba(0, 0, 0, 0.09) 0px 8px 4px, rgba(0, 0, 0, 0.09) 0px 16px 8px, rgba(0, 0, 0, 0.09) 0px 32px 16px; */

        }

        .form-item-block .form-item-group .form-item-label {
            margin-bottom: 0;
        }

        .form-item-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 0.8rem;
            margin: 0.6rem 0;
            background-color: #eaecf6;
            border-radius: 0.4rem;
            box-shadow: rgba(0, 0, 0, 0.05) 0px 0px 0px 1px;
        }

        .form-item-row .form-item-label {
            margin-bottom: 0;
            margin-right: 1rem;
        }

        .form-item-time {
            min-width: 2rem;
            line-height: 2rem;
        }

        .form-item-description {
            text-align: left;
            color: #68696d;
            font-size: 0.8rem;
            padding: 0.2rem 0 0 0;
        }

        .wifi-refresh {
            color: #3f64fb;
        }

        .form-item-inner {
            display: none;
        }

        .form-item-inner-label {
            font-weight: 400;
        }

        .light-value {
            color: #7893ff;
            font-size: 1.2rem;
        }

        input[type="time"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            cursor: pointer;
            display: block;
            width: 100%;
            color: red;
            text-align: center;
            position: relative;
        }

        .footer {
            height: 2rem;
            line-height: 2rem;
            text-align: center;
            color: #a6a9ae;
        }

        .loading-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            /* åŠé€æ˜é»‘è‰²èƒŒæ™¯ */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            /* ç¡®ä¿å®ƒä½äºé¡µé¢é¡¶éƒ¨ */
        }

        .loading-icon {
            border: 6px solid rgba(0, 0, 0, 0.1);
            border-top-color: #5d7cfa;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .tip {
            display: none;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            color: white;
        }

        .success {
            background-color: #4CAF50;
            /* ç»¿è‰² */
        }

        .failure {
            background-color: #f44336;
            /* çº¢è‰² */
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <div class="title">
                <h2>WiFiæ™ºèƒ½æˆæ—¶<br />ç”µå­æ—¶é’Ÿ</h2>
            </div>
            <div class="nav">
                <div id="wifi-tab" class="tab tab-active" onclick="toogleTab('wifi')">Wi-Fiæˆæ—¶</div>
                <div id="clock-tab" class="tab" onclick="toogleTab('clock')">æ‰‹åŠ¨æˆæ—¶</div>
                <div id="system-tab" class="tab " onclick="toogleTab('system')">ç³»ç»Ÿè®¾ç½®</div>
            </div>
        </div>
        <div class="content">
            <div id="tip" class="tip"></div>
            <div id="wifi-content" class="content-block content-show">
                <form class="form">
                    <div class="form-item">
                        <label class="form-item-label">Wi-Fiåç§°</label>
                        <div class="form-item-group ssid-select">
                            <select class="form-item-select" id="ssid">
                            </select>
                            <div class="toogle-ssid-btn" onclick="toogleSsid('input')">æ‰‹è¾“æ¨¡å¼</div>
                        </div>
                        <div class="form-item-group ssid-input content-hide">
                            <input class="form-item-input" id="ssid-input" type="text" placeholder="" />
                            <div class="toogle-ssid-btn" onclick="toogleSsid('select')">é€‰æ‹©æ¨¡å¼</div>
                        </div>
                        <p class="form-item-description wifi-refresh" onclick="getWifiList()">
                            ğŸ‘†ç‚¹æ­¤å¯é‡æ–°è·å–æ‚¨å‘¨å›´çš„wifiåç§°åˆ—è¡¨å“¦ã€‚
                        </p>
                        <p class="form-item-description">
                            âœï¸å¦‚æœæ²¡æœ‰æœç´¢åˆ°æ‚¨è¦çš„Wi-Fiåç§°ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥ã€‚
                        </p>
                    </div>
                    <div class="form-item">
                        <label class="form-item-label">Wi-Fiå¯†ç </label>
                        <input class="form-item-input" type="text" placeholder="" id="pwd" />
                    </div>
                    <p class="form-item-description">
                        æ³¨æ„: ä¿å­˜æˆåŠŸåï¼Œå°†å¼€å¯è‡ªåŠ¨ç½‘ç»œå¯¹æ—¶ã€‚
                    </p>
                    <div class="form-button">
                        <button class="reset-button" onclick="handleReset('wifi')">é‡ç½®</button>
                        <button class="save-button" type="button" onclick="handleSubmit('wifi')">ä¿å­˜</button>
                    </div>
                </form>
              
            </div>
            <div id="clock-content" class="content-block">
                <form class="form">
                    <p class="form-item-description" style="background: #fa9a5d;
                    color: #fff;
                    font-weight: 700;
                    border-radius: 0.4rem;
                    padding: 0.4rem; text-align: left;">
                        åªéœ€è¦è®¾ç½®æ‚¨çš„æœ¬åœ°æ—¶é—´(å¦‚æœ‰å¤ä»¤æ—¶ï¼Œè¯·é€‰æ‹©å¤ä»¤æ—¶å‰çš„æ—¶é—´)ï¼Œä¿å­˜æˆåŠŸåå°†è‡ªåŠ¨æ¨ç®—æ—¶é’Ÿçš„å››å›½æ—¶é—´ã€‚
                    </p>
                    <div class="form-item">
                        <label class="form-item-label">æ‰‹åŠ¨è®¾ç½®æ—¶é—´</label>
                        <input type="datetime-local" class="form-item-input" id="localTime" value="2023-04-01T20:00"
                            placeholder="è¯·é€‰æ‹©æ—¥æœŸå’Œæ—¶é—´" />
                        <!-- <input class="form-item-input" id="localTime" value="20:00" type="datetime" placeholder="" /> -->
                    </div>
                    <div class="form-item autoLocalTime">
                        <input type="checkbox" class="form-item-checkbox-normal" id="form-item-local-time"
                            onchange="getLocalTime(event)" />
                        <label for="form-item-local-time" class="form-item-label">è·å–æ‰‹æœºå½“å‰æ—¶é—´</label>
                    </div>
                    <p class="form-item-description">æ³¨æ„ï¼šè¯¥æ¨¡å¼ä¸‹æ—¶é’Ÿæ–­ç”µä¸èµ°æ—¶ï¼Œé‡æ–°ä¸Šç”µæ—¶é—´å½’é›¶ã€‚</p>
                    <div class="form-button">
                        <button class="reset-button" onclick="handleReset('clock')">é‡ç½®</button>
                        <button class="save-button" onclick="handleSubmit('clock')">ä¿å­˜</button>
                    </div>
                </form>
            </div>
            <div id="system-content" class="content-block">
                <div class="sub-title-content">
                    <span id="default-sub" class="sub-title sub-title-active" onclick="toggleSub('default')">å¸¸ç”¨è®¾ç½®</span>
                    <span id="zone-sub" class="sub-title" onclick="toggleSub('zone')">æ—¶åŒºè®¾ç½®</span>
                    <span id="daylight-sub" class="sub-title" onclick="toggleSub('daylight')">å¤ä»¤æ—¶è®¾ç½®</span>
                    <span id="more-sub" class="sub-title sub-title2" onclick="toggleSub('more')">æ›´å¤š</span>
                </div>
                <form class="form">
                    <div id="default-sub-content" class="sub-content sub-content-show">
                        <div class="form-item-block">
                            <div class="form-item-group">
                                <label class="form-item-label">è‡ªåŠ¨ç½‘ç»œå¯¹æ—¶</label>
                                <input class="form-item-checkbox" type="checkbox" id="isAutoUpdateTime" />
                            </div>
                            <p class="form-item-description">
                                å¼€å¯åæ¬¡æ—¥0ç‚¹ä¸é‡æ–°ä¸Šç”µæ—¶å°†è‡ªåŠ¨ç½‘ç»œå¯¹æ—¶ã€‚
                            </p>
                        </div>
                        <div class="form-item-block">
                            <label class="form-item-label">æ—¶é’Ÿæ˜¾ç¤º</label>
                            <div class="form-item-group">
                                <div class="form-item-radio">
                                    <input type="radio" name="is24" id="is12" value="is12" />
                                    <label for="is12">12å°æ—¶åˆ¶</label>
                                </div>
                                <div class="form-item-radio">
                                    <input type="radio" name="is24" id="is24" value="is24" checked />
                                    <label for="is24">24å°æ—¶åˆ¶</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-item-block">
                            <div class="form-item-group">
                                <label class="form-item-label">äº®åº¦è®¾ç½®</label>
                                <span class="light-value">4/8</span>
                            </div>
                            <input class="form-item-range" type="range" min="1" max="8" step="1" value="4" id="lightLevel"
                                onchange="rangeSlide(value)" />
                        </div>
                        
                        <div class="form-item-block">
                            <div class="form-item-group">
                                <label class="form-item-label">é¦–ä½æ˜¾ç¤º0</label>
                                <input class="form-item-checkbox" type="checkbox" id="isFixZero" />
                            </div>
                            <p class="form-item-description">
                                å¼€å¯åæ—¶é’Ÿå±å¹•ç¬¬ä¸€ä½ä¸ºç©ºæ—¶æ˜¾ç¤º0ï¼Œæ¯”å¦‚01:00ã€‚
                            </p>
                        </div>
                        <div class="form-item-block">
                            <label class="form-item-label">æ—¥æœŸæ˜¾ç¤º</label>
                            <div class="form-item-group">
                                <div class="form-item-radio">
                                    <input type="radio" name="isLoopDisplay" id="isLoopDisplay_0" value="0"
                                        checked />
                                    <label for="isLoopDisplay_0">å…³é—­</label>
                                </div>
                                <div class="form-item-radio">
                                    <input type="radio" name="isLoopDisplay" id="isLoopDisplay_1" value="1" />
                                    <label for="isLoopDisplay_1">5s</label>
                                </div>
                                <div class="form-item-radio">
                                    <input type="radio" name="isLoopDisplay" id="isLoopDisplay_2" value="2" />
                                    <label for="isLoopDisplay_2">10ç§’</label>
                                </div>
                                <div class="form-item-radio">
                                    <input type="radio" name="isLoopDisplay" id="isLoopDisplay_3" value="3" />
                                    <label for="isLoopDisplay_3">å¸¸æ˜¾</label>
                                </div>
                            </div>
                            <p class="form-item-description">
                                å¼€å¯åæ—¶é’Ÿå±å¹•æŒ‰è®¾ç½®é¢‘ç‡æ˜¾ç¤ºå½“å‰æ—¥æœŸã€‚
                            </p>
                        </div>
                        <div class="form-item-block">
                            <div class="form-item-group">
                                <label class="form-item-label">è‡ªåŠ¨äº®åº¦</label>
                                <input class="form-item-checkbox" type="checkbox" id="isAutoLight"
                                    onchange="handleAutoLight(event)" />
                            </div>
                            <p class="form-item-description">
                                å¼€å¯åå°†åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´å†…è‡ªåŠ¨è°ƒèŠ‚è‡³æœ€ä½äº®åº¦ã€‚(åŸºäºç¬¬1æ—¶é’Ÿ)
                            </p>
                            <div class="form-item-inner">
                                <div class="form-item-row">
                                    <label class="form-item-label form-item-inner-label">å¤œé—´å¼€å§‹æ—¶é—´</label>
                                    <input class="form-item-input form-item-time" type="time" id="nightRangeBegin"
                                        value="20:00" placeholder="" />
                                </div>
                                <div class="form-item-row">
                                    <label class="form-item-label form-item-inner-label">å¤œé—´ç»“æŸæ—¶é—´</label>
                                    <input class="form-item-input form-item-time" type="time" id="nightRangeEnd"
                                        value="06:00" placeholder="" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="zone-sub-content" class="sub-content"></div>

                    <div id="daylight-sub-content" class="sub-content"></div>
                    
                    <div id="more-sub-content" class="sub-content">
                        <div class="form-item-block">
                            <label class="form-item-label">è‡ªå®šä¹‰NTPæœåŠ¡å™¨åœ°å€</label>
                            <div class="form-item-group">
                                <input class="form-item-input" id="npt-server" type="text" placeholder="" />
                            </div>
                            <p class="form-item-description">
                                æ³¨æ„: è¯·ç¡®ä¿è‡ªå®šä¹‰NTPæœåŠ¡å™¨åœ°å€å¯ä»¥æ­£å¸¸è®¿é—®ã€‚
                            </p>
                        </div>
                    </div>
                    
                    <div class="form-button">
                        <button class="reset-button" onclick="handleReset('system')">é‡ç½®</button>
                        <button class="save-button" onclick="handleSubmit('system')">ä¿å­˜</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="footer">
            @2025 æ™šé—´ç”µå­ç§‘æŠ€
        </div>
        <div id="loading-container" class="loading-container">
            <div class="loading-icon"></div>
        </div>
    </div>
    <script>
        "use strict";

        let defaultData = {};
        let ssidType = 'select';
        let subActiveType = 'default'

        // åˆ‡æ¢tab
        function toogleTab(activeType) {
            document.getElementsByClassName('tab-active')[0]?.classList?.remove('tab-active');
            document.getElementById(`${activeType}-tab`)?.classList?.add('tab-active');

            document.getElementsByClassName('content-show')[0]?.classList?.remove('content-show');
            document.getElementById(`${activeType}-content`)?.classList?.add('content-show');

            handleReset(activeType);
        }

        // åˆ‡æ¢wifiåç§°è¾“å…¥æ–¹å¼
        function toogleSsid(type) {
            if (type === 'input') {
                ssidType = 'input';
                document.getElementsByClassName(`ssid-input`)[0]?.classList?.remove(`content-hide`);
                document.getElementsByClassName(`ssid-select`)[0]?.classList?.add('content-hide');
            } else {
                ssidType = 'select';
                document.getElementsByClassName(`ssid-select`)[0]?.classList?.remove(`content-hide`);
                document.getElementsByClassName(`ssid-input`)[0]?.classList?.add('content-hide');
            }

        }

        // è·å–æ‰‹æœºæœ¬åœ°æ—¶é—´
        function getLocalTime(e) {
            e.target.checked ? (
                document.getElementById("localTime").disabled = true,
                // document.getElementById("localTime").value = (new Date()).toLocaleTimeString('zh', { hour12: false , hour: "2-digit", minute: "2-digit" }) 
                setLocalTime()
            ) : (document.getElementById("localTime").disabled = false)
        }

        function setLocalTime() {
            const localTimeInput = document.getElementById('localTime');
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hour = String(now.getHours()).padStart(2, '0');
            const minute = String(now.getMinutes()).padStart(2, '0');
            // æ³¨æ„ï¼šdatetime-local é€šå¸¸ä¸æ˜¾ç¤ºç§’æ•°ï¼Œä½†å¦‚æœä½ éœ€è¦ï¼Œå¯ä»¥åŠ ä¸Šå®ƒ
            const second = '00'; // è®¾ç½®ä¸º00ï¼Œå› ä¸ºdatetime-localé€šå¸¸ä¸å¤„ç†ç§’

            // æ„é€ æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²
            const dateTimeString = `${year}-${month}-${day}T${hour}:${minute}:${second}`;

            // è®¾ç½®è¾“å…¥æ¡†çš„å€¼
            localTimeInput.value = dateTimeString;
        }

        // äº®åº¦è®¾ç½®
        function rangeSlide(value) {
            document.querySelector('.light-value').textContent = `${value}/${8}`;
        }

        // å¯ç”¨è‡ªåŠ¨äº®åº¦
        function handleAutoLight(event) {
            const show = event.target.checked;
            document.querySelector('.form-item-inner').style.display = show ? 'block' : 'none';
        }

        // é‡ç½®æ—¶é’Ÿè®¾ç½®
        function handleReset(activeType) {
            event?.preventDefault();
            event?.stopPropagation();
            if (activeType === 'wifi') {
                if (defaultData?.ssidList?.length > 0) {
                    const selectElement = document.getElementById('ssid');
                    selectElement.innerHTML = '';
                    defaultData.ssidList
                        .filter(ssid => typeof ssid === 'object')
                        .forEach((ssid) => {
                            const option = document.createElement('option');
                            option.value = ssid.name;
                            option.text = ssid.name;
                            selectElement.appendChild(option);
                        });
                }
            } else if (activeType === 'system') {
                if (subActiveType === 'default') {
                    if (defaultData.is24) {
                        document.getElementById('is24').checked = true;
                        document.getElementById('is12').checked = false;
                    } else {
                        document.getElementById('is12').checked = true;
                        document.getElementById('is24').checked = false;
                    }
                    document.getElementById("lightLevel").value = defaultData.lightLevel || 4;
                    rangeSlide(defaultData.lightLevel || 4);

                    document.getElementById("isFixZero").checked = !!defaultData.isFixZero;

                    defaultData.isLoopDisplay !== undefined && (document.getElementById(`isLoopDisplay_${defaultData.isLoopDisplay}`).checked = true);

                    document.getElementById("isAutoUpdateTime").checked = !!defaultData.isAutoUpdateTime;

                    if (!!defaultData.isAutoLight) {
                        document.getElementById("isAutoLight").checked = !!defaultData.isAutoLight;
                        handleAutoLight({ target: { checked: !!defaultData.isAutoLight } });
                        document.getElementById("nightRangeBegin").value = defaultData.nightRangeBegin;
                        document.getElementById("nightRangeEnd").value = defaultData.nightRangeEnd;
                    }
                } else if(subActiveType === 'zone') {  
                    for (let i = 1; i <= 4; i++) {
                        const timeZone = defaultData[`timeZone${i}`];
                        if (timeZone !== undefined && timeZone !== null) {
                            document.getElementById(`z_zone_${i}`).value = timeZone < 0 ? "-" : "";
                            document.getElementById(`z_time_${i}`).value = Math.abs(timeZone);
                        }
                    }
                } else if (subActiveType === 'daylight') {
                    for (let i = 1; i <= 4; i++) {
                        document.getElementById(`DST_on_${i}`).checked = !!defaultData[`DST_on_${i}`];
                        document.getElementById(`DST_offset_${i}`).value = defaultData[`DST_offset_${i}`] || 60;
                        document.getElementById(`DST_start_month_${i}`).value = defaultData[`DST_start_month_${i}`] || 3;
                        document.getElementById(`DST_start_day_${i}`).value = defaultData[`DST_start_day_${i}`] || 1;
                        document.getElementById(`DST_start_time_${i}`).value = defaultData[`DST_start_time_${i}`] || 0;
                        document.getElementById(`DST_end_month_${i}`).value = defaultData[`DST_end_month_${i}`] || 6;
                        document.getElementById(`DST_end_day_${i}`).value = defaultData[`DST_end_day_${i}`] || 1;
                        document.getElementById(`DST_end_time_${i}`).value = defaultData[`DST_end_time_${i}`] || 0;
                    }
                } else if (subActiveType === 'more') { 
                    document.getElementById("ntp-server").value = !!defaultData.ntpServer ? defaultData.ntpServer : "";
                }
                
            } else {
                document.getElementById("localTime").value = "20:00";
                document.getElementById("localTime").disabled = false;
                document.getElementById("form-item-local-time").checked = false;
            }
        }

        function getDisplayType() {
            var radios = document.getElementsByName('isLoopDisplay');

            // éå†radioæŒ‰é’®ï¼Œæ‰¾åˆ°è¢«é€‰ä¸­çš„é‚£ä¸€ä¸ª
            var selectedValue;
            for (var i = 0; i < radios.length; i++) {
                if (radios[i].checked) {
                    selectedValue = radios[i].value;
                    break;
                }
            }
            return selectedValue;
        }
        
        // ä¿å­˜æ—¶é’Ÿè®¾ç½®
        function handleSubmit(activeType) {
            event.preventDefault();
            event.stopPropagation();
            document.getElementById('loading-container').style.display = 'flex';
            let params = {};

            if (activeType === 'wifi') {
                params = {
                    ssid: ssidType === 'select' ? document.getElementById('ssid')?.value : document.getElementById('ssid-input')?.value,
                    pwd: document.getElementById('pwd')?.value,
                    isAutoUpdateTime: true,
                }
            } else if (activeType === 'clock') {
                params = {
                    localTime: document.getElementById('localTime')?.value,
                    localTimeZone: (new Date()).getTimezoneOffset(),
                    isAutoUpdateTime: false,
                }
            } else {
                if (subActiveType === 'default') {
                    params = {
                        is24: document.getElementById('is24')?.checked,
                        lightLevel: document.getElementById('lightLevel')?.value,
                        isFixZero: document.getElementById('isFixZero')?.checked,
                        isLoopDisplay: getDisplayType(),
                        isAutoLight: document.getElementById('isAutoLight')?.checked,
                        nightRangeBegin: document.getElementById('nightRangeBegin')?.value,
                        nightRangeEnd: document.getElementById('nightRangeEnd')?.value,
                        isAutoUpdateTime: document.getElementById('isAutoUpdateTime')?.checked,
                    }
                } else if (subActiveType === 'zone') {
                    for (let i = 1; i <= 4; i++) {
                        params[`timeZone${i}`] = document.getElementById(`z_zone_${i}`)?.value + document.getElementById(`z_time_${i}`)?.value;    
                    }   
                } else if (subActiveType === 'daylight') {
                    for (let i = 1; i <= 4; i++) {
                        params[`DST_on_${i}`] = document.getElementById(`DST_on_${i}`)?.checked;
                        params[`DST_offset_${i}`] = document.getElementById(`DST_offset_${i}`)?.value;
                        params[`DST_start_month_${i}`] = document.getElementById(`DST_start_month_${i}`)?.value;
                        params[`DST_start_day_${i}`] = document.getElementById(`DST_start_day_${i}`)?.value;
                        params[`DST_start_time_${i}`] = document.getElementById(`DST_start_time_${i}`)?.value;
                        params[`DST_end_month_${i}`] = document.getElementById(`DST_end_month_${i}`)?.value;
                        params[`DST_end_day_${i}`] = document.getElementById(`DST_end_day_${i}`)?.value;
                        params[`DST_end_time_${i}`] = document.getElementById(`DST_end_time_${i}`)?.value;
                    }
                } else if (subActiveType === 'more') {
                    params['ntpServer'] = document.getElementById('npt-server')?.value;
                }
            }

            const formData = new FormData();

            for (const key in params) {
                if (params.hasOwnProperty(key)) {
                    formData.append(key, params[key]);
                }
            }

            fetch('/saveSystemSetting', {
                method: 'POST',
                body: formData,
            })
                .then(response => {
                    if (!response || response.status !== 200) {
                        throw new Error(`HTTP é”™è¯¯ï¼çŠ¶æ€: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (activeType === 'wifi') {
                        getNetWorkingResult();
                    } else {
                        document.getElementById('loading-container').style.display = 'none';
                        showTip(true, 'é…ç½®ä¿å­˜æˆåŠŸ!');
                    }

                    defaultData = Object.assign({}, defaultData, params);
                })
                .catch(error => {
                    document.getElementById('loading-container').style.display = 'none';
                    showTip(false, 'è·å–æ•°æ®è¶…æ—¶, è¯·ç»™æ—¶é’Ÿé‡æ–°ä¸Šç”µå†è¯•ï¼');
                });
        }

        // è·å–æ—¶é’Ÿè®¾ç½®
        function getClockSetting() {
            fetch('/getClockSetting')
                .then(response => {
                    if (!response) {
                        throw new Error(`HTTP é”™è¯¯ï¼çŠ¶æ€: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    defaultData = data;
                    handleReset('wifi');
                })
                .catch(error => {
                    // å¤„ç†é”™è¯¯æƒ…å†µ
                    showTip(false, "è·å–æ•°æ®è¶…æ—¶, è¯·ç»™æ—¶é’Ÿé‡æ–°ä¸Šç”µå†è¯•ï¼");
                });
        }

        function getWifiList() {
            document.getElementById('loading-container').style.display = 'flex';
            fetch('/getWifiList')
                .then(response => {
                    if (!response) {
                        throw new Error(`HTTP é”™è¯¯ï¼çŠ¶æ€: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    toogleSsid('select');
                    const selectElement = document.getElementById('ssid');
                    selectElement.innerHTML = '';

                    data.ssidList
                        .filter(ssid => typeof ssid === 'object')
                        .forEach((ssid) => {
                            const option = document.createElement('option');
                            option.value = ssid.name;
                            option.text = ssid.name;
                            selectElement.appendChild(option);
                        });
                })
                .catch(error => {
                    // å¤„ç†é”™è¯¯æƒ…å†µ
                    showTip(false, "è·å–æ•°æ®è¶…æ—¶, è¯·ç»™æ—¶é’Ÿé‡æ–°ä¸Šç”µå†è¯•ï¼");
                });
            setTimeout(() => {
                document.getElementById('loading-container').style.display = 'none';
            }, 2000);
        }

        function getNetWorkingResult() {
            let timeout;
            clearTimeout(timeout);

            fetch('/getNetWorkingResult')
                .then(response => {
                    if (!response) {
                        throw new Error(`HTTP é”™è¯¯ï¼çŠ¶æ€: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    switch (data.type) {
                        case 'OK_00':
                            document.getElementById('loading-container').style.display = 'none';
                            showTip(true, "wifiè¿æ¥æˆåŠŸ!");
                            break;
                        case 'FAIL_01':
                            document.getElementById('loading-container').style.display = 'none';
                            showTip(false, "wifiåç§°æˆ–å¯†ç é”™è¯¯ï¼Œè¯·æ£€æŸ¥!");
                            break;
                        case 'FAIL_02':
                            document.getElementById('loading-container').style.display = 'none';
                            showTip(false, "wifiæˆæ—¶è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œï¼");
                            break;
                        case 'FAIL_03':
                            timeout = setTimeout(() => {
                                getNetWorkingResult();
                            }, 500);
                            break;
                        default:
                            document.getElementById('loading-container').style.display = 'none';
                            break;
                    }
                })
                .catch(error => {
                    document.getElementById('loading-container').style.display = 'none';
                    showTip(false, "wifiè¿æ¥è¶…æ—¶, è¯·ç»™æ—¶é’Ÿé‡æ–°ä¸Šç”µåå†è¯•ï¼");
                });
        }

        function showTip(isSuccess, msg) {
            var tipElement = document.getElementById('tip');
            // æ¸…é™¤ä¹‹å‰å¯èƒ½å­˜åœ¨çš„å®šæ—¶å™¨ï¼Œé˜²æ­¢é‡å¤è°ƒç”¨
            clearTimeout(tipElement.timer);

            // æ˜¾ç¤ºæç¤ºä¿¡æ¯
            tipElement.style.display = 'block';

            tipElement.textContent = msg;

            if (isSuccess) {
                tipElement.classList.add('success');
                tipElement.classList.remove('failure');
            } else {
                tipElement.classList.add('failure');
                tipElement.classList.remove('success');
            }

            tipElement.timer = setTimeout(function () {
                tipElement.style.display = 'none';
            }, 5000);
        }

        function generateTimeOptions(selectElement) {
            selectElement.innerHTML = '';
            for (let i = 0; i <= 23; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = `${i}æ—¶`;
                selectElement.appendChild(option);
            }
        }
        function generateMonthOptions(selectElement) {
            selectElement.innerHTML = ''; // æ¸…ç©ºæ—§é€‰é¡¹
            for (let i = 1; i <= 12; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = `${i}æœˆ`;
                selectElement.appendChild(option);
            }
        }

        function generateDayOptions(selectElement, month) {
            const daysInMonth = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            const year = new Date().getFullYear();
            const days = daysInMonth[month - 1];

            selectElement.innerHTML = ''; // æ¸…ç©ºæ—§é€‰é¡¹
            for (let day = 1; day <= days; day++) {
                const option = document.createElement('option');
                option.value = day;
                option.textContent = `${day}æ—¥`;
                selectElement.appendChild(option);
            }
        }

        function addEventListenerOnce(element, event, handler) {
            element.removeEventListener(event, handler); // ç§»é™¤æ—§çš„ç›‘å¬å™¨
            element.addEventListener(event, handler); // æ·»åŠ æ–°çš„ç›‘å¬å™¨
        }

        function generateTimeZoneOptions(selectedValue) {
            const options = [];
            for (let i = 0; i <= 12; i += 0.5) {
                const value = i % 1 === 0 ? i : i.toFixed(1);
                options.push(`<option value="${value}" ${value == selectedValue ? 'selected' : ''}>${value}åŒº</option>`);
            }
            return options.join('');
        }

        function generateTimeZoneSelector(clockNumber, selectedTime = "8") {
            return `
                <div class="form-item-block" id="ZONE_${clockNumber}">
                    <label class="form-item-label" >æ—¶é’Ÿ${clockNumber}æ—¶åŒº</label>
                    <div class="form-item-group">
                        <select class="form-item-select" id="z_zone_${clockNumber}" style="flex: 1 1 0; margin-right: 0.6rem;" aria-label="æ—¶åŒºé€‰æ‹©">
                            <option value="" selected}>ä¸œæ—¶åŒº</option>
                            <option value="-"}>è¥¿æ—¶åŒº</option>
                        </select>
                        <select class="form-item-select" id="z_time_${clockNumber}" style="flex: 1 1 0; margin-right: 0.6rem;" aria-label="æ—¶å·®">
                            ${generateTimeZoneOptions(selectedTime)}
                        </select>
                    </div>
                </div>
            `;
        }

        function initializeZoneSettings() {
             // åŠ¨æ€ç”Ÿæˆå››ä¸ªæ—¶åŒºè®¾ç½®
            const timeZoneContainer = document.getElementById('zone-sub-content');
            for (let i = 1; i <= 4; i++) {
                timeZoneContainer.innerHTML += generateTimeZoneSelector(i);
            } 
        }

        function generateOffsetOptions() {
            const offsets = [-120, -90, -60, -30, -15, 0, 15, 30, 60, 90, 120];
            return offsets.map(offset => `<option value="${offset}" ${offset === 60 ? 'selected' : ''}>${offset > 0 ? '+' : ''}${offset}åˆ†é’Ÿ</option>`).join('');
        }

        function generateDaylightSettings(index) {
            return `
                <div class="dst-container" id="DST_${index}">
                    <div class="dst-title">
                        <span class="dst-title-text">æ—¶é’Ÿ${index}</span>
                    </div>
                    <div class="form-item" style="padding: 0;">
                        <div class="form-item-group">
                            <div>
                                <label class="form-item-label">å¼€å¯å¤ä»¤æ—¶</label>
                                <input class="form-item-checkbox" type="checkbox" id="DST_on_${index}" style="border: 0.2rem solid #fa9a5d;" />
                            </div>
                            <div>
                                <label class="form-item-label">æ—¶é—´åç§»</label>
                                <select class="form-item-select" id="DST_offset_${index}" aria-label="æ—¶å·®" style="width: auto;">
                                    ${generateOffsetOptions()}
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-item" style="padding: 0;">
                        <label class="form-item-label">å¤ä»¤æ—¶å¼€å¯æ—¶é—´</label>
                        <div class="form-item-group" style="gap: 0 0.4rem;">
                            <select class="form-item-select monthPicker-start" id="DST_start_month_${index}" aria-label="æœˆä»½"></select>
                            <select class="form-item-select dayPicker-start" id="DST_start_day_${index}" aria-label="æ—¥æœŸ"></select>
                            <select class="form-item-select timePicker-start" id="DST_start_time_${index}" aria-label="æ—¶é—´"></select>
                        </div>
                        <label class="form-item-label">å¤ä»¤æ—¶ç»“æŸæ—¶é—´</label>
                        <div class="form-item-group" style="gap: 0 0.4rem;">
                            <select class="form-item-select monthPicker-end" id="DST_end_month_${index}" aria-label="æœˆä»½"></select>
                            <select class="form-item-select dayPicker-end" id="DST_end_day_${index}" aria-label="æ—¥æœŸ"></select>
                            <select class="form-item-select timePicker-end"  id="DST_end_time_${index}"  aria-label="æ—¶é—´"></select>
                        </div>
                    </div>
                </div>
            `;
        }

        function initializeDaylightSettings() {
            const container = document.getElementById('daylight-sub-content');
            for (let i = 1; i <= 4; i++) {
                container.innerHTML += generateDaylightSettings(i);

                // åˆå§‹åŒ–æœˆä»½å’Œæ—¥æœŸé€‰æ‹©å™¨
                const monthPickerStart = document.getElementById(`DST_start_month_${i}`);
                const dayPickerStart = document.getElementById(`DST_start_day_${i}`);
                const monthPickerEnd = document.getElementById(`DST_end_month_${i}`);
                const dayPickerEnd = document.getElementById(`DST_end_day_${i}`);
                const timePickerStart = document.getElementById(`DST_start_time_${i}`);
                const timePickerEnd = document.getElementById(`DST_end_time_${i}`);

                generateMonthOptions(monthPickerStart);
                generateDayOptions(dayPickerStart, parseInt(monthPickerStart.value, 10));
                generateMonthOptions(monthPickerEnd);
                generateDayOptions(dayPickerEnd, parseInt(monthPickerEnd.value, 10));
                generateTimeOptions(timePickerStart);
                generateTimeOptions(timePickerEnd);

                // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
                monthPickerStart.addEventListener('change', () => {
                    generateDayOptions(dayPickerStart, parseInt(monthPickerStart.value, 10));
                });
                monthPickerEnd.addEventListener('change', () => {
                    generateDayOptions(dayPickerEnd, parseInt(monthPickerEnd.value, 10));
                });
            }
        }
       
        function toggleSub(type) {
            subActiveType = type;
            // æ¿€æ´»å½“å‰å­æ ‡é¢˜å¹¶æ˜¾ç¤ºå¯¹åº”å†…å®¹å—
            const activeSubTitle = document.getElementById(`${type}-sub`);
            const activeContent = document.getElementById(`${type}-sub-content`);

            // åˆ‡æ¢å­æ ‡é¢˜çš„æ¿€æ´»çŠ¶æ€
            if (activeSubTitle && activeContent) {
                document.getElementsByClassName('sub-title-active')[0]?.classList?.remove('sub-title-active');
                activeSubTitle.classList.add('sub-title-active');
                document.getElementsByClassName('sub-content-show')[0]?.classList?.remove('sub-content-show');
                activeContent.classList.add('sub-content-show');
            }

            // æ£€æŸ¥æ˜¯å¦å·²ç»åˆå§‹åŒ–è¿‡ï¼Œé¿å…é‡å¤ç”Ÿæˆ DOM
            if (type === 'zone' && !activeContent.dataset.initialized) {
                initializeZoneSettings();
                activeContent.dataset.initialized = true; // æ ‡è®°ä¸ºå·²åˆå§‹åŒ–
            }

            if (type === 'daylight' && !activeContent.dataset.initialized) {
                initializeDaylightSettings();
                activeContent.dataset.initialized = true; // æ ‡è®°ä¸ºå·²åˆå§‹åŒ–
            }


            handleReset('system');
        }
        // é¡µé¢åŠ è½½å®Œæˆåéšè—åŠ è½½é®ç½©å±‚
        window.onload = function () {
            console.log('onload');
            document.getElementById('loading-container').style.display = 'none';
        };

        getClockSetting();
    </script>
</body>

</html>